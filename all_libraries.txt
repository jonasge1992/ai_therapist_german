from PIL import Image
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import (
    ApplicationBuilder,
    CommandHandler,
    MessageHandler,
    filters,
    ContextTypes,
    CallbackContext
)
from utils.extractors import extract_urls
from utils import *
from config import config
from models import (
    get_subscription_status,
    get_message_count,
    update_message_count
)
from handlers import (
    start,
    echo,
    process_video_message,
    process_voice_message,
    process_photo,
    reset
)
import logging
import os
import tempfile
import cv2
import ffmpeg
import json
import uuid
import aiomysql
import subprocess
from moviepy.editor import VideoFileClip
from openai import AsyncOpenAI
from langchain_openai import ChatOpenAI
from langchain_core.runnables.history import RunnableWithMessageHistory
from langchain_core.prompts import ChatPromptTemplate, MessagesPlaceholder
from langchain_community.chat_message_histories import SQLChatMessageHistory
import base64
